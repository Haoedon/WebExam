<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; }
        h1 { color: #333; }
        .section { margin: 20px 0; padding: 15px; background: #f9f9f9; border-left: 4px solid #4CAF50; }
        button { padding: 10px 20px; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #45a049; }
        textarea { width: 100%; height: 150px; font-family: monospace; }
        .result { margin-top: 10px; padding: 10px; background: #e8f5e9; border-radius: 4px; white-space: pre-wrap; font-family: monospace; font-size: 12px; }
        .error { background: #ffebee; border-left-color: #f44336; }
        input { padding: 8px; margin: 5px 0; width: 100%; box-sizing: border-box; }
        label { display: block; margin-top: 10px; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞</h1>
        
        <div class="section">
            <h2>1. –ü—Ä–æ–≤–µ—Ä–∫–∞ localStorage</h2>
            <button onclick="checkLocalStorage()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É –≤ localStorage</button>
            <div id="storageResult" class="result"></div>
        </div>

        <div class="section">
            <h2>2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Å—Ç–æ–≥–æ —Ç–µ—Å—Ç–∞</h2>
            <button onclick="testSimple()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ test_simple.php</button>
            <div id="simpleResult" class="result"></div>
        </div>

        <div class="section">
            <h2>3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º—ã –Ω–∞ cart.html</h2>
            <button onclick="checkForm()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª—è —Ñ–æ—Ä–º—ã</button>
            <div id="formResult" class="result"></div>
        </div>

        <div class="section">
            <h2>4. –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞</h2>
            <label>–§–ò–û:</label>
            <input type="text" id="testFio" value="–¢–µ—Å—Ç –ò–≤–∞–Ω–æ–≤">
            
            <label>Email:</label>
            <input type="text" id="testEmail" value="test@example.com">
            
            <label>–¢–µ–ª–µ—Ñ–æ–Ω:</label>
            <input type="text" id="testPhone" value="+7 (999) 123-45-67">
            
            <label>–ê–¥—Ä–µ—Å:</label>
            <input type="text" id="testAddress" value="–ú–æ—Å–∫–≤–∞, —É–ª. –¢–µ—Å—Ç–æ–≤–∞—è, 1">
            
            <label>–î–∞—Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∏:</label>
            <input type="date" id="testDate" value="2024-01-20">
            
            <label>–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏:</label>
            <select id="testTime">
                <option value="morning">09:00 - 12:00</option>
                <option value="afternoon" selected>12:00 - 15:00</option>
                <option value="evening">15:00 - 18:00</option>
                <option value="late">18:00 - 21:00</option>
            </select>
            
            <br><br>
            <button onclick="sendTestOrder()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑</button>
            <div id="testResult" class="result"></div>
        </div>

        <div class="section">
            <h2>5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ</h2>
            <button onclick="checkServerFiles()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å orders.json</button>
            <div id="serverResult" class="result"></div>
        </div>

        <div class="section">
            <h2>6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤</h2>
            <button onclick="checkLogs()">–ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏</button>
            <div id="logsResult" class="result"></div>
        </div>
    </div>

    <script>
        function checkLocalStorage() {
            const result = document.getElementById('storageResult');
            try {
                const cart = JSON.parse(localStorage.getItem('cart')) || [];
                result.innerHTML = '‚úÖ –ö–æ—Ä–∑–∏–Ω–∞: ' + (cart.length > 0 ? '–Ω–µ –ø—É—Å—Ç–∞' : '–ø—É—Å—Ç–∞') + '\n\n';
                result.innerHTML += JSON.stringify(cart, null, 2);
            } catch (e) {
                result.innerHTML = '‚ùå –û—à–∏–±–∫–∞: ' + e.message;
                result.classList.add('error');
            }
        }

        async function testSimple() {
            const result = document.getElementById('simpleResult');
            result.innerHTML = '‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞...';
            
            try {
                const formData = new FormData();
                formData.append('fio', '–¢–µ—Å—Ç –ò–≤–∞–Ω–æ–≤');
                formData.append('email', 'test@example.com');
                formData.append('phone', '+7 (999) 123-45-67');
                
                const response = await fetch('test_simple.php', {
                    method: 'POST',
                    body: formData
                });
                
                const data = await response.json();
                result.innerHTML = `üìä –°—Ç–∞—Ç—É—Å: ${response.status}\n\n` + JSON.stringify(data, null, 2);
                
                if (!response.ok) {
                    result.classList.add('error');
                }
            } catch (e) {
                result.innerHTML = '‚ùå –û—à–∏–±–∫–∞: ' + e.message;
                result.classList.add('error');
            }
        }

        function checkForm() {
            const result = document.getElementById('formResult');
            const fields = ['name', 'email', 'phone', 'address', 'deliveryDate', 'deliveryTime', 'totalCost'];
            let html = '';
            
            fields.forEach(field => {
                const el = document.getElementById(field);
                const value = el ? (el.value || el.textContent) : '–≠–õ–ï–ú–ï–ù–¢ –ù–ï –ù–ê–ô–î–ï–ù';
                html += `${field}: ${value}\n`;
            });
            
            result.innerHTML = html;
        }

        async function sendTestOrder() {
            const result = document.getElementById('testResult');
            result.innerHTML = '‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞...';
            
            try {
                // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—É—é –∫–æ—Ä–∑–∏–Ω—É
                const testCart = [
                    { id: 'test_car_1', price: 500000, name: 'Test Car 1' },
                    { id: 'test_car_2', price: 450000, name: 'Test Car 2' }
                ];

                const formData = new FormData();
                formData.append('fio', document.getElementById('testFio').value);
                formData.append('email', document.getElementById('testEmail').value);
                formData.append('phone', document.getElementById('testPhone').value);
                formData.append('address', document.getElementById('testAddress').value);
                formData.append('deliveryDate', document.getElementById('testDate').value);
                formData.append('deliveryTime', document.getElementById('testTime').value);
                formData.append('comment', '–¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑');
                formData.append('newsletter', 'on');
                formData.append('cart_data', JSON.stringify({
                    items: testCart,
                    total: 950200
                }));

                console.log('–û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞...');
                
                const response = await fetch('save_order.php', {
                    method: 'POST',
                    body: formData
                });

                const data = await response.json();
                
                result.innerHTML = `üìä –°—Ç–∞—Ç—É—Å: ${response.status}\n\n` + JSON.stringify(data, null, 2);
                
                if (!response.ok) {
                    result.classList.add('error');
                }
            } catch (e) {
                result.innerHTML = '‚ùå –û—à–∏–±–∫–∞: ' + e.message;
                result.classList.add('error');
            }
        }

        async function checkServerFiles() {
            const result = document.getElementById('serverResult');
            result.innerHTML = '‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞...';
            
            try {
                const response = await fetch('orders.json');
                const data = await response.json();
                result.innerHTML = `üìä –ù–∞–π–¥–µ–Ω–æ ${data.length} –∑–∞–∫–∞–∑–æ–≤\n\n` + JSON.stringify(data, null, 2);
            } catch (e) {
                result.innerHTML = '‚ö†Ô∏è –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –ø—É—Å—Ç (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –Ω–æ–≤–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏)';
            }
        }

        async function checkLogs() {
            const result = document.getElementById('logsResult');
            result.innerHTML = '‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞...';
            
            try {
                const response = await fetch('orders_log.txt');
                const text = await response.text();
                result.innerHTML = text || 'üìÑ –õ–æ–≥ —Ñ–∞–π–ª –ø—É—Å—Ç';
            } catch (e) {
                result.innerHTML = '‚ö†Ô∏è –§–∞–π–ª –ª–æ–≥–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ)';
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => {
            checkLocalStorage();
        });
    </script>
</body>
</html>
